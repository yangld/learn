#process/todo/工作内容 

## 需求
1、管理员节点和角色节点，增删改时，记录管理员操作记录。

2、授权记录的数据可见性逻辑，例如不同组织相互之间是否可见。

3、OP租户ID为0时，当前租户为基础租户，能够分配OP和cds的权限，但是不能分配mdm等业务系统权限。其他租户不能分配OP和cds的权限，可以分配mdm等业务系统权限。全部租户都可以分配uas的权限。

4、在perm表（权限表）中的code赋予英文字母缩写，便于后续开发可读性。当前是数字。

5、创建租户时，自动创建该租户的默认管理员和默认角色，并将管理员和角色关联。根据租户购买的产品，确定默认角色关联的权限范围。

6、不单独提供用户权限查询接口。把细粒度授权校验逻辑增加到现有的查询login user服务中。替换掉之前的粗粒度授权校验逻辑。

7、调整角色选择权限的web UI控件，从树控件调整为树表控件。

8、权限的前端操作控件和后端查询服务中，都增加各个级别以下内容是否全选。便于前端操作和后端逻辑。

## 思考
服务-功能-菜单-按钮(读取/编辑)

## 工作
- 创建mdm的权限信息的数据库, 先创建用户和机构的
	- 需要确保,支持新版本的角色创建(方便支持, 支持all)
- 在105的环境上, 创建租户, 验证创建管理员和角色的功能
- 验证token_validate接口,是否返回权限列表

## 后续工作
- 创建其它的权限的数据库信息
- 增加管理员操作日志
- 授权记录权限可见性调整
- 使用脚本,创建运维和运营的管理员和角色
- 增加all的配置
	- 服务端
		- 角色和权限的关系中, 要记录code的前缀和type
		- 返回给web端的是角色和权限的关系
		- 权限的code和type不能改变, 会影响角色和权限关系
	- web端
		- 根据code的前缀和type来确定是否显示
		- 没有则不显示
		- web端, 权限列表的展示


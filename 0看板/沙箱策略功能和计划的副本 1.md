---
up:: [[2023-03-01]]
---
 
	 任务: 
	项目: 
	阶段: 
	输入: 
	输出: 
	日期: 2023-03-01
	时间: 18:35
	截止日期: 
![[WechatIMG108.jpeg]]
1. 增加云打包服务添加脚本
	1. 支持容器应用打包
	2. 支持沙箱应用打包
2. 创建租户，并添加云打包服务
3. 是否需要和现有的应用管理分开
4. license的限制问题
5. 容器应用打包
6. 沙箱应用打包
7. 默认keystore配置
8. 相关的接口

## 过程
1. 管理员上传容器应用，上传沙箱应用
2. 管理员升级容器应用，升级沙箱应用
3. 用户在uem平台下载容器应用，下载沙箱应用
4. 用户在uem平台升级容器应用，升级沙箱应用
5. 容器应用获取对应的沙箱策略（需要知道如何获取租户id）
	1. 可以打包到apk中，则每个uem租户对应一个apk
	2. 或者其他
6. 容器应用获取已经安装到手机的沙箱应用列表
	1. 然后依次获取沙箱策略
7. 管理员打包容器应用
8. 管理员打包沙箱应用

1. 应用，策略，租户

## 用例
1. UEM管理员
	1. 上传容器应用
	2. 上传沙箱应用
	3. 升级容器应用
	4. 升级沙箱应用
2. 平台管理员
	1. 租户license有效期管理
		1. 之前只影响web端，不影响客户端
		2. 修改成需要影响容器应用，禁用容器应用
		3. 不能完全禁用，当租户有效期延期后，容器应用应可恢复，否则影响太大
		4. license针对的是租户还是设备？？
	2. 添加打包服务
		1. 打包客户端是否可以使用
			1. 租户是否有打包服务
			2. 租户license是否在有效期内
		2. web端展示：安装位置，容器内， 桌面上
		3. 打包逻辑： 租户id打进安全策略中（统一都打进去）
		4. 同步到应用市场：不同步
		5. 单独的web，server，数据库，从应用管理单独分出来，可以是分支
	3. 创建租户，并配置打包服务
	4. 容器应用管理
		1. 应用类型
			1. 去掉轻应用，鸿蒙应用
		2. 应用信息
			1. 去掉版本分布，统计报表，应用评价
		3. 是否需要配置成集市应用
			1. 如果所有租户使用一个，则配置成集市应用
			2. 否则配置成普通应用
			3. 建议普通应用
			4. 确认：集市应用是否可以修改沙箱策略？？
		4. 上传容器应用
		5. 配置沙箱策略
			1. 支持配置是否桌面可见
			2. 支持增加租户ID配置？？
		6. 发布应用
			1. 默认选择，全部发布机构
		7. 升级容器应用
		8. 下架容器应用
		9. 删除容器应用
		10. 下载打包后的容器应用
	5. 沙箱应用管理
		1. 上传沙箱应用
		2. 配置沙箱策略
			1. 支持配置桌面可见，容器内可见
			2. 支持增加租户ID配置？？
		3. 发布应用
		4. 升级容器应用
		5. 下架容器应用
		6. 删除容器应用
		7. 下载打包后的容器应用
3. 用户
	1. 下载和安装容器应用
	2. 下载和安装沙箱应用
4. 客户端
	1. 获取容器应用的沙箱策略（租户id， 应用包名，版本号）
	2. 获取沙箱应用的沙箱策略（租户id， 应用包名，版本号）

## 整理
1. 运营：不需修改
	1. 增加一个服务，打包服务，打包服务中有打包容器app，和打包web的服务入口URL
	2. 创建租户，设置打包服务
2. 统一认证
	1. 增加权限单元，打包服务：增加脚本
	2. 管理员添加管理员，设置打包服务权限
3. 打包服务：
	1. 新增：目的同时支持打包服务和应用管理
	2. 显示的菜单：应用管理，应用集市，应用沙箱策略，系统日志，系统设置
	3. 安全策略，支持选择安装位置
	4. 打包逻辑中增加租户ID的设置
	5. 接口：
		1. 默认签名的管理
		2. 应用沙箱策略的管理
		3. 应用集市管理
			1. 上架后，不发布到应用市场
			2. 编辑安全策略时，设置安全位置
			3. 安全策略增加租户ID
		4. 应用管理
			1. 上架后，不发布到应用市场
			2.  编辑安全策略时，设置安全位置
			3. 安全策略增加租户ID
		5. 系统日志
	6. 变化：
		1. 数据库单独的一个
		2. 配置文件，修改数据库名
		3. 服务端口配置，只需要修改应用管理
		4. nginx配置，客户端和web端的路径修改，增加访问的前缀
4. uem
	1. 上传和升级容器应用
	2. 上传和升级沙箱应用
5. 容器应用
	1. 新增：
	2. 获取容器应用的沙箱策略（租户ID，应用包名，版本号）
	3. 获取沙箱应用的沙箱策略（租户ID，应用包名，版本号）
	4. 获取已安装的沙箱应用列表及每个应用的租户ID
	5. 定期获取容器应用License是否可用
		1. 根据租户的license有效期
		2. 根据租户是否有打包服务